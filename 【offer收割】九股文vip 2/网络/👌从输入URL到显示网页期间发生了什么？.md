从输入URL到显示网页，浏览器和用户之间的交互涉及多个步骤和多个组件的协同工作。<br />**1. URL输入与解析**

- 当用户在浏览器的地址栏中输入URL后，浏览器首先会检查这个URL是否完整，以及是否需要进行补全。
- 浏览器会尝试从历史记录、书签等地方找到已经输入的字符串可能对应的URL，并提供智能提示，帮助用户补全或选择正确的URL。

**2. DNS解析**

- 解析域名是访问网页的第一步。浏览器会查看本地hosts文件，检查是否有对应的IP地址记录。
- 如果hosts文件中没有对应的IP地址，浏览器会发送DNS查询请求到本地DNS服务器。
- 本地DNS服务器会检查其缓存，如果有相应的记录，则直接返回结果；否则，会向根DNS服务器发起查询，逐级查找直至找到正确的IP地址。

**3. 建立TCP连接**

- 在获取到目标服务器的IP地址后，浏览器会与服务器建立TCP连接。HTTP通信是通过TCP/IP协议族中的TCP协议来实现的。
- 在HTTP/1.1版本中，默认情况下每个请求都会建立一个新的TCP连接；但在HTTP/2中，多个请求可以复用同一个TCP连接，这大大提高了网络效率。

**4. 发送HTTP请求**

- 一旦TCP连接建立成功，浏览器会向服务器发送HTTP请求。请求包括请求行（如GET或POST方法、请求的URL、HTTP协议版本等）、请求头（包含有关客户端和请求的信息）以及请求体（在POST请求中，用于传输数据）。

**5. 服务器处理请求**

- 服务器收到请求后，会解析请求并查找相应的资源文件。这个过程可能涉及文件系统操作、数据库查询等。
- 如果服务器设置了重定向（如301或302重定向），则会向浏览器发送重定向响应，告知浏览器新的URL地址。

**6. 返回HTTP响应**

- 服务器处理完请求后，会向浏览器发送HTTP响应。响应包括状态行（如200 OK表示请求成功）、响应头（包含有关服务器和响应的信息）以及响应体（即请求的资源文件）。

**7. 浏览器解析并渲染页面**

- 浏览器收到服务器的响应后，会解析HTML、CSS和JavaScript等文件，构建DOM树和渲染树。
- 在解析过程中，浏览器可能会发现HTML文件中嵌入了其他资源（如图片、视频等），此时会发送额外的HTTP请求来获取这些资源。
- 一旦所有资源都加载完成，浏览器就会渲染页面并显示在屏幕上。

**8. 关闭TCP连接**

- 在HTTP/1.0中，服务器发送完响应后通常会关闭TCP连接；但在HTTP/1.1和HTTP/2中，连接可能会被保持打开状态以支持多个请求的复用。
