视图（View）是SQL数据库中的一种虚拟表，它是基于SQL查询结果定义的。视图本身不存储数据，而是存储了一个SQL查询，当你访问视图时，数据库会执行该查询并返回结果。视图可以包含来自一个或多个表的列和行，并且可以包含过滤、排序、连接等复杂的SQL操作。
### 创建视图的基本语法
```
CREATE VIEW view_name AS
SELECT column1, column2, ...
FROM table_name
WHERE condition;
```
### 示例
假设有一个名为employees的表，结构如下：
```
CREATE TABLE employees (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    department_id INT,
    salary DECIMAL(10, 2)
);
```
我们可以创建一个视图high_salary_employees，只包含工资高于5000的员工：
```
CREATE VIEW high_salary_employees AS
SELECT id, name, salary
FROM employees
WHERE salary > 5000;
```
### 为什么要使用视图？
使用视图有多种好处，具体如下：
#### 1. 简化复杂查询
视图可以将复杂的SQL查询封装起来，使得用户在使用时只需简单地查询视图，避免重复编写复杂的SQL语句。
```
-- 使用视图
SELECT * FROM high_salary_employees;
```
#### 2. 提高数据安全性
视图可以限制用户访问底层表中的敏感数据。例如，可以创建一个不包含敏感信息的视图，用户只能访问视图而不是底层表。
```
CREATE VIEW employee_names AS
SELECT id, name
FROM employees;
```
#### 3. 提供数据抽象
视图可以提供数据的不同视角，抽象出底层表的复杂性。例如，可以创建一个视图，将多个表的联合结果呈现为一个单一的逻辑表。
```
CREATE VIEW department_salaries AS
SELECT d.name AS department_name, SUM(e.salary) AS total_salary
FROM departments d
JOIN employees e ON d.id = e.department_id
GROUP BY d.name;
```
#### 4. 实现数据重用
视图可以被多个应用程序或用户重用，确保数据逻辑的一致性和可维护性。如果查询逻辑发生变化，只需修改视图定义，而不需要修改所有使用该查询的地方。
#### 5. 提高查询性能（某些情况下）
在某些情况下，数据库管理系统可以对视图进行优化，从而提高查询性能。例如，物化视图（Materialized View）可以存储查询结果，从而加快查询速度（但这在MySQL中需要手动实现，因为MySQL本身不支持物化视图）。
### 注意事项

- **视图的更新**：并不是所有视图都可以更新。只有满足一定条件（如视图基于单个表，没有聚合函数等）的视图才可以进行插入、更新和删除操作。
- **性能影响**：视图本身不存储数据，每次访问视图时都会执行底层查询。如果视图定义的查询非常复杂，可能会影响性能。
- **依赖管理**：视图依赖于底层表结构，如果底层表结构发生变化（如列名更改、表删除等），视图也需要相应调整。
### 视图有哪些特点？
视图的列可以来自不同的表，是表的抽象和在逻辑意义上建立的新关系。<br />视图是由基本表(实表)产生的表(虚表)。<br />视图的建立和删除不影响基本表。<br />对视图内容的更新(添加，删除和修改)直接影响基本表。<br />当视图来自多个基本表时，不允许添加和删除数据。<br />视图的操作包括创建视图，查看视图，删除视图和修改视图。
### 视图的使用场景有哪些？
视图根本用途：简化sql查询，提高开发效率。如果说还有另外一个用途那就是兼容老的表结构。<br />下面是视图的常见使用场景：<br />重用SQL语句；<br />简化复杂的SQL操作。在编写查询后，可以方便的重用它而不必知道它的基本查询细节；<br />使用表的组成部分而不是整个表；<br />保护数据。可以给用户授予表的特定部分的访问权限而不是整个表的访问权限；<br />更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据。
### 视图有什么优点
查询简单化。视图能简化用户的操作数据安全性。视图使用户能以多种角度看待同一数据，能够对机密数据提供安全保护逻辑数据独立性。视图对重构数据库提供了一定程度的逻辑独立性
### 视图有什么缺点
性能。数据库必须把视图的查询转化成对基本表的查询，如果这个视图是由一个复杂的多表查询所定义，那么，即使是视图的一个简单查询，数据库也把它变成一个复杂的结合体，需要花费一定的时间。<br />修改限制。当用户试图修改视图的某些行时，数据库必须把它转化为对基本表的某些行的修改。事实上，当从视图中插入或者删除时，情况也是这样。对于简单视图来说，这是很方便的，但是，对于比较复杂的视图，是不可修改的
