在 MySQL 中，索引的存储结构主要有两种：B+树索引和哈希索引。不同的存储引擎使用不同的索引结构。以下是对这两种索引结构的详细说明：
### 1. B+树索引
B+树索引是 MySQL 中最常用的索引结构，尤其是 InnoDB 存储引擎使用 B+树作为其默认的索引结构。B+树是一种平衡树结构，所有实际的数据都存储在叶子节点上，并且叶子节点通过链表连接。B+树索引适用于大多数查询场景，包括范围查询。
#### B+树索引结构示意图
```
[30] 
         /    \
    [10, 20]  [40, 50]
    /  |  \    /  |  \
[5] [15] [25] [35] [45] [55]
```

- **根节点**：包含索引键30。
- **内部节点**：包含索引键10, 20和40, 50。
- **叶子节点**：包含实际的数据5, 15, 25, 35, 45, 55，并通过链表连接。
#### 特点

- **平衡性**：B+树是一种平衡树，所有叶子节点在同一层。
- **顺序访问**：叶子节点通过链表连接，支持顺序访问和范围查询。
- **存储结构**：在 InnoDB 中，B+树的叶子节点存储的是数据行本身（聚簇索引），而非叶子节点存储的是指向数据行的指针（辅助索引）。
### 2. 哈希索引
哈希索引是一种基于哈希表的数据结构，通过哈希函数将键值映射到哈希表中的桶（bucket）位置。哈希索引适用于等值查询，但不适用于范围查询。MySQL 的 Memory 存储引擎支持哈希索引。
#### 哈希索引结构示意图
```
Hash Table
+----------+----------+----------+----------+
| Bucket 1 | Bucket 2 | Bucket 3 | Bucket 4 |
+----------+----------+----------+----------+
| Key1,    | Key2,    | Key3,    | Key4,    |
| Value1   | Value2   | Value3   | Value4   |
| Key5,    |          |          |          |
| Value5   |          |          |          |
+----------+----------+----------+----------+
```

- **哈希表**：包含多个桶，每个桶存储一个或多个键值对。
- 例如，Bucket 1存储Key1, Value1和Key5, Value5。
#### 特点

- **快速查找**：哈希索引查找速度非常快，时间复杂度为 O(1)。
- **等值查询**：适用于等值查询，不支持范围查询。
- **存储结构**：每个桶存储一个或多个键值对。
### 3. InnoDB 的聚簇索引和辅助索引
InnoDB 存储引擎使用 B+树索引，并且有两种主要类型的索引：
#### 聚簇索引（Clustered Index）

- **定义**：聚簇索引是按照主键顺序存储数据行的索引。
- **特点**：数据行和主键值存储在一起，叶子节点包含了完整的数据行。
- **优点**：查询效率高，尤其是范围查询。
#### 辅助索引（Secondary Index）

- **定义**：辅助索引是非主键列上的索引。
- **特点**：叶子节点存储的是主键值，而不是数据行本身。
- **优点**：支持快速查找非主键列，但查询时需要进行一次回表操作（通过主键值查找完整的数据行）。
### 总结

- **B+树索引**：适用于大多数查询场景，尤其是范围查询。InnoDB 存储引擎使用 B+树作为其默认的索引结构，包括聚簇索引和辅助索引。
- **哈希索引**：适用于等值查询，Memory 存储引擎支持哈希索引。
