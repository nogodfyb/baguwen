CAP理论，又称CAP定理，是由计算机科学家Eric Brewer在2000年提出的一个关于分布式系统的基本定理。CAP是三个性质的缩写：一致性（Consistency）、可用性（Availability）和分区容忍性（Partition Tolerance）。CAP定理指出，对于一个分布式系统来说，在同一时间内最多只能满足这三者中的两项，而无法同时满足三者。
### CAP 定理的三个性质

1. **一致性（Consistency）**：
   - 每次读操作都能读到最近一次写操作所写入的数据。换句话说，所有节点在同一时间看到的数据是一致的。
2. **可用性（Availability）**：
   - 每次请求都能收到一个（非错误的）响应，即使有部分节点发生故障。系统始终是可用的，能够处理请求。
3. **分区容忍性（Partition Tolerance）**：
   - 系统能够继续运行，即使网络分区（网络通信故障）导致部分节点之间无法通信。系统能够容忍网络分区的存在。
### CAP 定理的含义
CAP定理的核心思想是，分布式系统在遇到网络分区时，必须在一致性和可用性之间做出权衡。具体来说：

- **CA（一致性 + 可用性）**：
   - 在没有网络分区的情况下，系统可以同时保证一致性和可用性。但一旦发生网络分区，系统必须在一致性和可用性之间做出选择。
- **CP（一致性 + 分区容忍性）**：
   - 系统在网络分区发生时仍然能够保持一致性，但可能会牺牲部分可用性。例如，系统可能会拒绝一些请求以确保数据一致性。
- **AP（可用性 + 分区容忍性）**：
   - 系统在网络分区发生时仍然能够保持高可用性，但可能会牺牲部分一致性。例如，不同节点可能会有不同的视图，导致短暂的不一致。
### 实际应用中的权衡
在实际应用中，不同的分布式系统根据需求和场景在CAP定理的三项性质之间做出不同的权衡。例如：

- **CA系统**：
   - 这种系统在没有网络分区的情况下能够保证一致性和可用性，但在发生网络分区时无法继续运行。典型的例子是关系型数据库（如传统的单机数据库）。
- **CP系统**：
   - 这种系统在网络分区发生时优先保证一致性，可能会牺牲部分可用性。典型的例子是分布式数据库（如HBase、Bigtable）。
- **AP系统**：
   - 这种系统在网络分区发生时优先保证可用性，可能会牺牲部分一致性。典型的例子是NoSQL数据库（如Cassandra、DynamoDB）。
